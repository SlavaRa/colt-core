<!doctype html>
<html lang="en" class="en">
<head>
    <meta charset="UTF-8">
    <title>Colt Log</title>

    <style type="text/css">
        HTML{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;}
        HTML,BODY{min-height:100%;}
        BODY{background:#f7f8fa;text-align:left;-webkit-font-smoothing:antialiased;margin:0;padding:0;}
        BODY,BUTTON,INPUT,LABEL,SELECT,TEXTAREA{color:#515458;font:13px/18px 'Lucida Grande','Lucida Sans Unicode','Lucida Sans','DejaVu Sans','Bitstream Vera Sans','Liberation Sans',Arial,sans-serif;}
        :focus{outline:none;}
        A:focus{outline:thin dotted #CCCFD3;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px;}
        A:hover,A:active{outline:0;}
        A{color:#06c;text-decoration:none;}A:visited{color:#606;}
        A:hover{color:#003d7a;text-decoration:underline;}
        A:link{-webkit-tap-highlight-color:transparent;}
        B,STRONG{font:bold;}
        ::-moz-selection{background:#06c;color:#FFF;text-shadow:none;}
        ::selection{background:#06c;color:#FFF;text-shadow:none;}
        .log{list-style:none;margin:0;padding:0 0 18px;}.log LI{cursor:pointer;padding:0.3076923076923077em 155px 0.38461538461538464em 37px;position:relative;}.log LI:nth-child(odd){background-color:#ebeef2;}
        .log LI.selected{background-color:#deeeff;border:1px solid #bfd9f2;border-width:1px 0 1px 0;padding-top:0.23076923076923078em;padding-bottom:0.3076923076923077em;}.log LI.selected P{max-height:none;}
        .log .error,.log .info,.log .warning{background-position:10px 0.46153846153846156em;background-repeat:no-repeat;-webkit-background-size:16px 16px;-moz-background-size:16px 16px;-o-background-size:16px 16px;background-size:16px 16px;}
        .log .selected.error,.log .selected.info,.log .selected.warning{background-position:10px 0.38461538461538464em;}
        .log .error{background-image:url('error.png');}
        .log .info{background-image:url('info.png');}
        .log .warning{background-image:url('warning.png');}
        .log P{margin:0;max-height:2.769230769230769em;}
        .log A{font-family:Consolas,'Andale Mono WT','Andale Mono','Lucida Console','Lucida Sans Typewriter','DejaVu Sans Mono','Bitstream Vera Sans Mono','Liberation Mono','Nimbus Mono L',Monaco,'Courier New',Courier,monospace;display:block;text-align:right;white-space:nowrap;overflow:hidden;position:absolute;top:0.38461538461538464em;right:15px;height:1.3846153846153846em;width:19ch;}
        .log .selected A{top:0.3076923076923077em;}
    </style>
    <script src="../../shared/jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../shared/jquery-resize.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>
<ul class="log"></ul>

<script>
    !function(a){function c(a,b,c){var d=a.children(),e=!1;a.empty();for(var g=0,h=d.length;h>g;g++){var i=d.eq(g);if(a.append(i),c&&a.append(c),f(a,b)){i.remove(),e=!0;break}c&&c.detach()}return e}function d(b,c,g,h,i){var j=b.contents(),k=!1;b.empty();for(var l="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",m=0,n=j.length;n>m&&!k;m++){var o=j[m],p=a(o);"undefined"!=typeof o&&(b.append(p),i&&b[b.is(l)?"after":"append"](i),3==o.nodeType?f(g,h)&&(k=e(p,c,g,h,i)):k=d(p,c,g,h,i),k||i&&i.detach())}return k}function e(a,b,c,d,h){var k=!1,l=a[0];if("undefined"==typeof l)return!1;for(var m=j(l),n=-1!==m.indexOf(" ")?" ":"\u3000",o="letter"==d.wrap?"":n,p=m.split(o),q=-1,r=-1,s=0,t=p.length-1;t>=s&&(0!=s||0!=t);){var u=Math.floor((s+t)/2);if(u==r)break;r=u,i(l,p.slice(0,r+1).join(o)+d.ellipsis),f(c,d)?t=r:(q=r,s=r),t==s&&0==t&&d.fallbackToLetter&&(o="",p=p[0].split(o),q=-1,r=-1,s=0,t=p.length-1)}if(-1==q||1==p.length&&0==p[0].length){var v=a.parent();a.remove();var w=h?h.length:0;if(v.contents().size()>w){var x=v.contents().eq(-1-w);k=e(x,b,c,d,h)}else{var y=v.prev(),l=y.contents().eq(-1)[0];if("undefined"!=typeof l){var m=g(j(l),d);i(l,m),h&&y.append(h),v.remove(),k=!0}}}else m=g(p.slice(0,q+1).join(o),d),k=!0,i(l,m);return k}function f(a,b){return a.innerHeight()>b.maxHeight}function g(b,c){for(;a.inArray(b.slice(-1),c.lastCharacter.remove)>-1;)b=b.slice(0,-1);return a.inArray(b.slice(-1),c.lastCharacter.noEllipsis)<0&&(b+=c.ellipsis),b}function h(a){return{width:a.innerWidth(),height:a.innerHeight()}}function i(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function j(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function k(b,c){return"undefined"==typeof b?!1:b?"string"==typeof b?(b=a(b,c),b.length?b:!1):"object"==typeof b?"undefined"==typeof b.jquery?!1:b:!1:!1}function l(a){for(var b=a.innerHeight(),c=["paddingTop","paddingBottom"],d=0,e=c.length;e>d;d++){var f=parseInt(a.css(c[d]),10);isNaN(f)&&(f=0),b-=f}return b}function m(a,b){return a?(b="string"==typeof b?"dotdotdot: "+b:["dotdotdot:",b],"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&window.console.log(b),!1):!1}if(!a.fn.dotdotdot){a.fn.dotdotdot=function(e){if(0==this.length)return e&&e.debug===!1||m(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){a(this).dotdotdot(e)});var g=this;g.data("dotdotdot")&&g.trigger("destroy.dot"),g.data("dotdotdot-style",g.attr("style")),g.css("word-wrap","break-word"),"nowrap"===g.css("white-space")&&g.css("white-space","normal"),g.bind_events=function(){return g.bind("update.dot",function(b,e){b.preventDefault(),b.stopPropagation(),j.maxHeight="number"==typeof j.height?j.height:l(g),j.maxHeight+=j.tolerance,"undefined"!=typeof e&&(("string"==typeof e||e instanceof HTMLElement)&&(e=a("<div />").append(e).contents()),e instanceof a&&(i=e)),q=g.wrapInner('<div class="dotdotdot" />').children(),q.empty().append(i.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var h=!1,k=!1;return n.afterElement&&(h=n.afterElement.clone(!0),n.afterElement.remove()),f(q,j)&&(k="children"==j.wrap?c(q,j,h):d(q,g,q,j,h)),q.replaceWith(q.contents()),q=null,a.isFunction(j.callback)&&j.callback.call(g[0],k,i),n.isTruncated=k,k}).bind("isTruncated.dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(g[0],n.isTruncated),n.isTruncated}).bind("originalContent.dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(g[0],i),i}).bind("destroy.dot",function(a){a.preventDefault(),a.stopPropagation(),g.unwatch().unbind_events().empty().append(i).attr("style",g.data("dotdotdot-style")).data("dotdotdot",!1)}),g},g.unbind_events=function(){return g.unbind(".dot"),g},g.watch=function(){if(g.unwatch(),"window"==j.watch){var b=a(window),c=b.width(),d=b.height();b.bind("resize.dot"+n.dotId,function(){c==b.width()&&d==b.height()&&j.windowResizeFix||(c=b.width(),d=b.height(),p&&clearInterval(p),p=setTimeout(function(){g.trigger("update.dot")},10))})}else o=h(g),p=setInterval(function(){var a=h(g);(o.width!=a.width||o.height!=a.height)&&(g.trigger("update.dot"),o=h(g))},100);return g},g.unwatch=function(){return a(window).unbind("resize.dot"+n.dotId),p&&clearInterval(p),g};var i=g.contents(),j=a.extend(!0,{},a.fn.dotdotdot.defaults,e),n={},o={},p=null,q=null;return j.lastCharacter.remove instanceof Array||(j.lastCharacter.remove=a.fn.dotdotdot.defaultArrays.lastCharacter.remove),j.lastCharacter.noEllipsis instanceof Array||(j.lastCharacter.noEllipsis=a.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),n.afterElement=k(j.after,g),n.isTruncated=!1,n.dotId=b++,g.data("dotdotdot",!0).bind_events().trigger("update.dot"),j.watch&&g.watch(),g},a.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1},a.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","\u3000",",",";",".","!","?"],noEllipsis:[]}};var b=1,n=a.fn.html;a.fn.html=function(a){return"undefined"!=typeof a?this.data("dotdotdot")&&"function"!=typeof a?this.trigger("update",[a]):n.call(this,a):n.call(this)};var o=a.fn.text;a.fn.text=function(b){if("undefined"!=typeof b){if(this.data("dotdotdot")){var c=a("<div />");return c.text(b),b=c.html(),c.remove(),this.trigger("update",[b])}return o.call(this,b)}return o.call(this)}}}(jQuery);

    $(document).ready(function() {
        $('.log').resize(function(){
            if(window.app)app.resize($('body').height());
        });

        test();
        //clear()
    });

    function test(){

        addLogMessage('mojito-dispatcher: Dispatcher created', "warning", "http://s7.addthis.com/js/250/addthis_widget.js")
        addLogMessage('mojito-dispatcher: Dispatcher paused', "error", "http://s7.addthis.com/js/250/addthis_widget.js")
        addLogMessage('mojito-client: Executing "@TodoMojit/getAll" on the client', "", "")
        addLogMessage('Get http://localhost:8666/static/T 200 OK 56ms consectetur adipisicing elit. Aliquam', "", "")
        addLogMessage('mojito-client: Attached 0 event delegates sequi nisi necessitatibus expedita suscipit eius fugiat recusandae beatae aut.', "", "")
        addLogMessage('mojito-client: Mojito Client State: active. Velit, veritatis suscipit saepe expedita iusto officiis odit nesciunt esse sapiente.', "", "")
        addLogMessage('Uncaught ReferenceError: Ajax is not defined [VM] dashboard (56):1<br> (anonymous function) [VM] dashboard (58):1<br> jQuery.globalEval<br> (anonymous function)<br> e.extend.each<br> f.fn.extend.domManip<br> f.fn.extend.append<br> MissingE.utilities.ajaxEvents.run<br> MissingE.utilities.ajaxEvents.init<br> (anonymous function)<br> (anonymous function)', "error", "mySource.js")
        addLogMessage('mojito-client: Mojito Client State: active. Velit, veritatis suscipit saepe expedita iusto officiis odit nesciunt esse sapiente.', "", "")
    }

    function addLogMessage(message, level, source){


        var style = "";
        if(["warning", "info", "error"].indexOf(level) != -1){
            style = ' class="'+level + '"';
        }

        var logItem = $('<li' + style + '><p>' + message + '</p>' +
                '<a href="javascript:openTarget(\'' + source + '\')" title="' + source + '">' + source + '</a></li>');

        $(logItem).children('a').each(function() {
            var str = $(this).text();
            if (str.length > 19) {
                str = str.replace('http://','');
                str = str.substr(0, 3) + '...' + str.substr(str.length-13, str.length);
                $(this).html(str);
            }
        });

        $(logItem).click(function(){
            if ($(this).hasClass('selected')) {
                $('.selected').removeClass('selected');
                $('.log li').children('p').dotdotdot({watch: 'window'});
            } else {
                $('.selected').removeClass('selected');
                $(this).addClass('selected');
                $('.log li').children('p').dotdotdot({watch: 'window'});
            }
        });

        $(".log").append(logItem);

        $(logItem).children('p').dotdotdot({watch: 'window'});
    }

    function clear(){

        $(".log li").remove();
    }

    function openTarget(m){
        console.log(m)
    }

    function logHeight(){
        return $(".log").height()
    }

</script>
</body>
</html>
